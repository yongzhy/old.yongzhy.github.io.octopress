
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Zhu Yong</title>
  <meta name="author" content="Zhu Yong">

  
  <meta name="description" content="This weekend, just after I received my official driving license, I ordered my first car &ndash; Citroen Grand C4 Picasso. The reasons I chose Grand &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://zhuyong.me">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Zhu Yong" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-46972014-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Zhu Yong</a></h1>
  
    <h2>$ echo "Be Persistent, Be Patient" >> ~/.life</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:zhuyong.me" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/11/08/ordered-my-first-car/">Ordered My First Car</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-11-08T17:47:12+08:00" pubdate data-updated="true">Nov 8<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This weekend, just after I received my official driving license, I ordered my first car &ndash; Citroen Grand C4 Picasso.</p>

<p>The reasons I chose Grand C4 Picasso are simple:</p>

<ol>
<li><p>I need MPV car, we have 6 family members, 5 seaters car not enough.</p></li>
<li><p>For MPV, I shortlisted Honda Stream, Toyota Wish and this Grand C4 Picasso. In Singapore Honda and Toyota cars are people&rsquo;s Number 1 choice because the high reliability and relatively low maintenance cost. If the car dealer still carry Honda Stream, I might go for that car. As for Toyota Wish, it&rsquo;s a quite old model, no change since 2009. As for Grand C4 Picasso, this is a new model, fuel efficient, and the dealer provide 5 years warranty + 5 years free service. Most importantly, I like both the interior and exterior of this car.</p></li>
</ol>


<p><img src="/images/blogimg/2015-11-08-Car/GC4P.jpg" title="&#34;Citroen Grand C4 Picasso&#34;" alt="&#34;Citroen Grand C4 Picasso&#34;"></p>

<p>Now I just need to wait for the deal to big the COE, settle car loan and inssurance, then I can collect my car. Sadly, that&rsquo;s at least 2-3 weeks waiting time.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/11/06/got-my-sg50-driving-license/">Got My SG50 Driving License</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-11-06T21:46:06+08:00" pubdate data-updated="true">Nov 6<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I passed my driving test at ComfortDelGro Driving Center on 29 Oct 2015 with only 1 attempt. And I received my offcial driving license card delivered on 5 Nov 2015, I didn&rsquo;t expect to get the card so fast, with only 1 week waiting time.</p>

<p>UBI driving center is the one with lowest passing rate among all 3 driving school in Singapore. I engaged a private driving instructor because of its flexibility and the relatively lower cost.</p>

<p>To pass the driving test, here are some tips based on my experience:</p>

<p>First, for each learning session on road, try to train yourself the judgement for speed and distance, especially those car coming from behind on the lane you are going to change to. Don&rsquo;t be rush or panic for lane change fail, it&rsquo;s learning session, safety is alway first.</p>

<p>Second, be familiar with the road and the circuit. You can find CDC circuit with Google search. For the road, I use Google <a href="https://play.google.com/store/apps/details?id=com.google.android.maps.mytracks&amp;hl=en"><code>My Tracks</code></a> app to track my learning session, then use Google Street View to go through the road whenever I need. Below is screen capture from my handphone.</p>

<p><img src="/images/blogimg/2015-11-06-Driving/mytrack_01.png" title="&#34;Google My Track&#34;" alt="&#34;Google My Track&#34;">
<img src="/images/blogimg/2015-11-06-Driving/mytrack_02.png" title="&#34;Google My Track&#34;" alt="&#34;Google My Track&#34;"></p>

<p>Third, try to book your test at off-peak time to avoid heavy traffic.</p>

<p>Forth, on actual test day, must must be confident, be calm, treat it same as normal learn session.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/11/05/config-logitech-performance-mx-zoom-button-in-ubuntu/">Config Logitech Performance MX Zoom Button in Ubuntu</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-11-05T13:42:07+08:00" pubdate data-updated="true">Nov 5<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The middle button (click wheel) on Logitech Performance MX is very very difficult to press. So I changed the <code>Zoom</code> button to middle button on windows system. To do same setting under Ubuntu, follow the instructions below:</p>

<ul>
<li>Install necessary software packages</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>   sudo apt-get install xbindkeys xautomation xev</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Next, use <code>xev</code> to find the button number for <code>Zoom</code> button. Just run <code>xev</code> from command line, then click <code>Zoom</code> button when your cursor is in the small white window. You will see somthing like below:</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ButtonPress event, serial 45, synthetic NO, window 0x2400001,
</span><span class='line'>    root 0x24d, subw 0x0, time 3735892633, (75,111), root:(301,192),
</span><span class='line'>    state 0x0, button 2, same_screen YES
</span><span class='line'>
</span><span class='line'>ButtonRelease event, serial 45, synthetic NO, window 0x2400001,
</span><span class='line'>    root 0x24d, subw 0x0, time 3735892633, (75,111), root:(301,192),
</span><span class='line'>    state 0x200, button 2, same_screen YES</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Create default <code>xbindkeys</code> config file with command:</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>   xbindkeys --defaults &gt; ~/.xbindkeysrc</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Open file <code>~/.xbindkeysrc</code> to add the following lines at end of the file:</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>"xte 'mouseclick 2'"
</span><span class='line'>b:13+Release</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/01/hacked-youcompleteme-to-support-lamely-structured-pojects/">Re-Hacked YouCompleteMe to Support Lamely Structured Projects</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-02-01T09:05:06+08:00" pubdate data-updated="true">Feb 1<span>st</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Nearly 1 Year ago, I attempted to hack <code>YouCompleteMe</code> for clang code completion for a lamely structured project, that hacking worked, but the hacking was dirty. For background information, <a href="http://stackoverflow.com/questions/21746668/configure-vim-youcompleteme-for-special-project-structure">here</a> is my origin question on StackOverflow and <a href="/blog/2014/02/20/hack-youcompleteme-and-libclang-for-lamely-structured-project/">here</a> is the detail about my first dirty hack.</p>

<p>Recently when I looked at this hacking again, I thought there should be a better way, especially after I found <a href="https://gist.github.com/Rip-Rip/758615">this code snippet</a> from GitHub Gist. At the moment I saw the code, I had a strong feeling that I have found the solution, I just need to verify it. To make code completion success for <code>clang -cc1 -fsyntack-only -code-complete-at a.c:4:11 main.c</code>, the source file to create <code>CXTranslationUnit</code> should be <code>main.c</code> and the source file to do <code>clang_codeCompleteAt</code> should be <code>a.c</code>. So I modified the code to pass one additional command line argument to be the file to create <code>TransicationUnit</code>, then compile and run command:</p>

<pre><code>$ ./complete a.c 11 4 main.c
</code></pre>

<p>When I saw the output, I confirmed this was a better way to hack <code>YouCompleteMe</code> for my need.</p>

<p>Now I found the correct direction, the rest was just spend time to code, test and debug, here is a summary for what I have modified:</p>

<ul>
<li>File <code>cpp/ycm/ClangCompleter/TransicationUnit.cpp</code>, function <code>TranslationUnit::CandidatesForLocation</code>, take additional parameter <code>compfile</code> to pass to <code>clang_codeCompleteAt</code></li>
<li>File <code>cpp/ycm/ClangCompleter/CodeCompleter.cpp</code>, function <code>ClangCompleter::CandidatesForLocationInFile</code>, take additional parameter <code>compfile</code> and pass this newly added parameter to <code>unit-&gt;CandidatesForLocation</code></li>
<li>File <code>ycmd/completers/cpp/clang_completer.py</code>, function <code>ComputeCandidatesInner</code>, follow the way <code>_FlagsForRequest</code> is implemented, add new function to get the <code>parent</code> source file to create <code>TransicationUnit</code> and pass that result to <code>CandidatesForLocationInFile</code></li>
<li>File <code>ycmd/completers/cpp/flags.py</code>, add the new function to get <code>parent</code> source file</li>
<li>File <code>.ycm_extra_conf.py</code> under project source directory, add function <code>ParentForFile</code>, this function read input <code>.clang_input_file</code>, which is the mapping for <strong>code-complete-at-file</strong> to <strong>TransicationUnit-file</strong></li>
<li>Created a python script to generate the mapping file for <strong>code-complete-at-file</strong> to <strong>TransicationUnit-file</strong></li>
</ul>


<p>Comparing to my first hacking, this round is very clean, only clang related part on <code>ycmd</code> is modified, the client side remain untouched.</p>

<p>I have checked in the modifications to <a href="https://github.com/yongzhy/ycmd">my fork of <code>ycmd</code></a> at branch <code>lamely</code>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/06/hdb-bto-home-network-diy/">HDB BTO Home Network DIY</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-06T12:20:40+08:00" pubdate data-updated="true">Jan 6<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Inspired by <a href="https://absolutehonesty.wordpress.com/2014/05/31/hougang-parkview-i-want-my-internet/">this blog</a>, I decided to DIY the network thing for my new HDB flat when I was shopping on Taobao in Nov. Followed the suggestion in that blog, I bought all necessary items from Taobao, but the network modules I bought are Cat 6 module, not 5E.</p>

<p>On Jan 03, my contractor went to my new HDB flat to install the lights we bought from Taobao, while they doing the lights installation, I was doing DIY job to change all RJ11 phone jacks to network RJ45 jacks.</p>

<p>Below are the tools I used for this DIY job.</p>

<p><img src="/images/blogimg/2015-01-06-network/network-000.jpg"></p>

<p>Start from bedrooms, change the RJ11 to RJ45 one by one.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2015/01/06/hdb-bto-home-network-diy/">Continue &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/31/t32hook-utility-to-auto-hook-trace32/">T32Hook: Utility to Auto Hook Trace32</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-31T15:12:54+08:00" pubdate data-updated="true">Dec 31<span>st</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Today is last day of 2014. I will use this 2014 last blog to write about the utility I recently developed.</p>

<p>On my latest project, firmware code failed during test with power cycle on target. And the Lauterbach emulator can&rsquo;t detect the <code>power on</code> event on this target, so we can&rsquo;t use the <code>power on</code> event to automate initial script running. The failure only happens after power cycle, so I must let Trace32 run the setup script to enable the trace in order to capture the code running history.</p>

<p>Because previously I already did a utility to automate failure replay using Trace32 simulation, I know Trace32 has remote API to control the script running. So I come out with the idea to detect target power cycle from the message on serial port (target firmware will print some message on serial port), upon power cycle event happen, use remote API to command Trace32 to execute the setup script.</p>

<p>QT already has the <code>The Simple Terminal</code> example, so my development leverage on this example code and added Trace32 remote API code.</p>

<p>This is the image of the main window for the final working product.</p>

<p><img src="/images/blogimg/2014-12-31-t32hook/t32hook-001.png"></p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/12/31/t32hook-utility-to-auto-hook-trace32/">Continue &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/29/2014-year-end-summary/">2014 Year End Summary</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-29T17:39:25+08:00" pubdate data-updated="true">Dec 29<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>It&rsquo;s end of Year 2014 and it&rsquo;s the time to write summary for this year. Year 2014 is just an ordinary year same as previous few years, the main reason is there were no much excited things happen. There were several good opportunities for me to change, but unfortunately, I didn&rsquo;t prepare myself well and I missed all those opportunities. I really think developer should be already be ready for opportunities, you never know when will an opportunity appears.</p>

<p>Anyway, to summarize my Year 2014, I grouped those things that worth mention here into few categories:</p>

<h3>Big Change</h3>

<p>There is only one thing can fit this category in 2014. On 31 July, I received email from HDB to inform us that we got queue No. 1 in HDB May 2014 sale of balance flats exercise. So I chose a new HDB 5 room flat from Costa Ris @ Pasir Ris, the location is good, very near to MRT station. My current flat location is also very good, 5 minutes walking distance to Boon Lay MRT, we decided to move to east side for better air quality and more places for kids to play. In the past two months, I was busy with new flat renovation. Every weekend I travel from very west of Singapore to very east of Singapore to monitor the renovation progress. The renovation is still in progress and we plan to move in after Chinese New Year 2015.</p>

<h3>Gadgets Bought In Year 2014</h3>

<ul>
<li>Acer C720 ChromeBook : I have install Ubuntu on this Chromebook through crouton, for the whole year, this notebook was my main computer. I use ChromeOS to surf web and use Ubuntu to do development and blog writing. I really love this machine.</li>
<li>Chromecast from Google : Mainly used to play videos from YouTube for my kids.</li>
<li>Allure Eyewear: Call Of Duty Ghost : No use much after few months</li>
<li>HHKB Pro 2 Type-S : To me, the key feeling not so good as my old IBM Model S</li>
<li>LG G Pro 2 : Good Phablet, nice battery life</li>
<li>SandDisk Extreme Pro 480GB SSD : Good deal from Amazon and very good performance</li>
</ul>


<h3>Continuous / Ongoing Efforts</h3>

<ul>
<li>Answered some StackOverflow questions and earned few hundreds reputation points.</li>
<li>Bought a domain and start writing blog on GitHub page. The first blog post was on 11 Dec 2013 and total of 34 blog posts have been published. From <code>Google Analytics</code> report, now the blog has 800 page view per month, the number is not much, but I am glad that some of the posts did helped the readers.</li>
<li>Use <code>Google Keep</code> as my daily <code>ToDoList</code> since 21 Jan 2014, so far it works well for my needs. Every morning I create a new task list with the date in title, then copy previous day&rsquo;s incomplete task to this new list, and also add new tasks. Tasks may not be completed in sequence, or been listed for quite few days, but it&rsquo;s OK, as long as I know there is this task need to be done.</li>
<li>Use <code>Google Calendar</code> as my diary to record my two boys&#8217; remarkable event since 06 Dec 2013. I create one calendar for each boy, then share the calendars to my wife, both of us tried to update the calendars daily, so we won&rsquo;t miss any valuable moment with the two boys.</li>
</ul>


<h3>Books I Have Read in 2014</h3>

<ul>
<li>The Power of Habit: Why We Do What We Do in Life and Business</li>
<li>Steve Jobs (Chinese Version)</li>
<li>Just for Fun &ndash; Linus Torvalds (Chinese Version)</li>
<li>Among Thieves</li>
<li>Hunger Game I, II and III</li>
<li>Ender&rsquo;s Game</li>
<li>Harry Potter (All 7 Books, Chinese Version)</li>
</ul>


<h3>Development</h3>

<ul>
<li>Developed a simple 2048 clone in Golang, console version. <a href="https://github.com/yongzhy/2048-console">code here</a></li>
<li>Developed a QT GUI tool to re-init Trace32 after detected target power cycle from the messages printed on serial port.</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/24/hhkb-palm-rest-arrived/">HHKB Palm Rest Arrived</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-24T09:18:53+08:00" pubdate data-updated="true">Dec 24<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>My HHKB palm rest from Taobao arrived last Saturday, and I brought it to office on Monday. After use if for two days, I am totally satisfied with it. The build quality is good, size is just nice for HHKB, well polished, and no strange smell. The logo was customized very good, exactly same as my requirement.</p>

<p><img src="/images/blogimg/2014-12-24-HHKB-Palm-Rest/palm-rest.jpg"></p>

<p>Maybe I should do a free advertisement for this Taobao shop: <a href="http://item.taobao.com/item.htm?spm=a1z10.1.w4004-5284025914.3.hP74Q9&amp;id=40499617063">Taobao Shop</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/22/upgraded-my-hp-dv6-6144tx-to-ssd-plus-hdd/">Upgraded My HP DV6-6144TX to SSD + HDD</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-22T22:18:37+08:00" pubdate data-updated="true">Dec 22<span>nd</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I received my Sandisk Extreme Pro 480GB SSD on 17 Dec, on that night, immediately after my kids slept, I went to study room and replaced the internal Toshiba SATA II HDD to this SSD. Next I partitioned the drive and installed Windows 7 Ultimate, the waiting time for Windows booting was significantly reduced.</p>

<p>Next on 18 Dec night, after I installed all drivers for Windows 7, I tried to install a Debian 7.7 system to another partition to make the computer dual boot. But I failed on first try, because non-free firmware required for the WIFI hardware, but the installer can&rsquo;t load firmware from the bootable USB drive. So I prepared another USB thumbdrive dedicated for the non-free firmware on 19 Dec night, this time the installation process went smoothly and I have Debian 7.7 and Windows 7 dual booting..</p>

<p>On 20 Dec, my shopping packages from Taobao were delivered, one of those packages is the SATA adapter to replace the DVD drive, this adapter only costed my RMB 27, which is very very cheap. On that night, I took out the DVD drive and replaced it with that adapter and the original Toshiba SATA II hard drive. So now my laptop has over 1TB hard drive capacity.</p>

<p>This is the image of Sandisk Extreme Pro 480GB SSD
<img src="/images/blogimg/2014-12-22-ChangeDrive/sandisk.jpg"></p>

<p>The SATA adapter with Toshiba SATA II drive mounted
<img src="/images/blogimg/2014-12-22-ChangeDrive/toshiba.jpg"></p>

<p>SSD and SATA adapter installed on the system. The adapter doesn&rsquo;t have the hole to mount screw at location 1, and its size is smaller than the original DVD drive, so it left some part un-covered at location 2. Considering the very cheap price, I am OK with the two not perfect point.
<img src="/images/blogimg/2014-12-22-ChangeDrive/all.jpg"></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/12/arm-rvct-tips-armcc-and-and-fromelf/">ARM RVCT Tips: Armcc &amp;&amp; Fromelf</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-12T15:54:19+08:00" pubdate data-updated="true">Dec 12<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>For embedded system C projects that share same code base, one common practice is to use various feature flags to encapsulate related code. This results difficulty in code reading, especially when you have huge amounts of feature flags, especially when flags&#8217; value depend on value of other flags. This is what I am dealing with in current project. And I found <code>armcc</code> and <code>fromelf</code> have some useful feature to help developer in such situation.</p>

<p>First, <code>armcc</code>, the compiler from ARM RVCT. Command line options are <code>--debug --debug_macros -E</code>, this will generate raw C file with all preprocessors been parsed, you can see how is a macro been defined.</p>

<ul>
<li><code>--debug</code> is to enable generate debug information</li>
<li><code>--debug_macros</code> is generate debug entry for macros. You can see the expanded macro in the generated C source code. <a href="http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0491h/CIHHDEAA.html">doc here</a></li>
<li><code>-E</code> is to tell compiler not compile the C file, just excute the preprocess step. <a href="http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0491h/CIHIDBBG.html">doc here</a></li>
</ul>


<p>Second, <code>fromelf</code>, imaging you have a complicated data structure defined, of which, some elements depends on some feature flags, to find out the difference between two different configurations, instead of load into debugger and compare, you can just use <code>fromelf</code> to dump the structure and use a diff tool to compare.</p>

<p>The command line is <code>fromelf --fieldoffsets --select=the_structure.* --output=the_structure.txt final.axf</code></p>

<ul>
<li><code>--fieldoffsets</code> produce offset for each structure elements. <a href="http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0477i/BABJBGBH.html">doc here</a></li>
<li><code>--select=the_structure.*</code> to select the data structure to output</li>
<li><code>--output</code> to specify output file contain the listing</li>
</ul>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
 <h1><img src="/favicon_32x32.png"/> Zhu Yong</h1>

  <p>An Embedded System Software Engineer</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/11/08/ordered-my-first-car/">Ordered My First Car</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/06/got-my-sg50-driving-license/">Got My SG50 Driving License</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/05/config-logitech-performance-mx-zoom-button-in-ubuntu/">Config Logitech Performance MX Zoom Button in Ubuntu</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/01/hacked-youcompleteme-to-support-lamely-structured-pojects/">Re-Hacked YouCompleteMe to Support Lamely Structured Projects</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/06/hdb-bto-home-network-diy/">HDB BTO Home Network DIY</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Categories</h1>
    <ul id="category-list"><li><a href='/blog/categories/amazon/'>Amazon (1)</a></li><li><a href='/blog/categories/applications/'>applications (2)</a></li><li><a href='/blog/categories/armcc/'>armcc (1)</a></li><li><a href='/blog/categories/c/'>c (3)</a></li><li><a href='/blog/categories/car/'>car (1)</a></li><li><a href='/blog/categories/chromebook/'>chromebook (3)</a></li><li><a href='/blog/categories/chromecast/'>chromecast (2)</a></li><li><a href='/blog/categories/clang/'>clang (2)</a></li><li><a href='/blog/categories/coding/'>coding (1)</a></li><li><a href='/blog/categories/crouton/'>crouton (2)</a></li><li><a href='/blog/categories/diy/'>DIY (1)</a></li><li><a href='/blog/categories/fromelf/'>fromelf (1)</a></li><li><a href='/blog/categories/gadget/'>gadget (9)</a></li><li><a href='/blog/categories/gae/'>GAE (1)</a></li><li><a href='/blog/categories/gcc/'>gcc (1)</a></li><li><a href='/blog/categories/git/'>git (1)</a></li><li><a href='/blog/categories/golang/'>golang (1)</a></li><li><a href='/blog/categories/hhkb/'>HHKB (3)</a></li><li><a href='/blog/categories/life/'>life (4)</a></li><li><a href='/blog/categories/linux/'>linux (2)</a></li><li><a href='/blog/categories/misc/'>misc (2)</a></li><li><a href='/blog/categories/mobaxterm/'>MobaXterm (2)</a></li><li><a href='/blog/categories/octopress/'>Octopress (4)</a></li><li><a href='/blog/categories/opensource/'>opensource (1)</a></li><li><a href='/blog/categories/reading/'>reading (2)</a></li><li><a href='/blog/categories/testing/'>testing (1)</a></li><li><a href='/blog/categories/ubuntu/'>ubuntu (2)</a></li><li><a href='/blog/categories/vim/'>vim (2)</a></li></ul>
</section>

<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/116199410365623934401?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



<section>
  
  
  <a href="https://github.com/yongzhy">@yongzhy</a> on GitHub
  
  
</section>


<section  class="googleplus">
    <h1>
    <a href="http://stackoverflow.com/users//yongzhy">
        <img src="http://stackoverflow.com/users/flair/.png?theme=clean" width="208" height="58" alt="profile for yongzhy at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for yongzhy at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
    </a>
    </h1>
</section>


  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Zhu Yong -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'zhuyong';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




<script src="//static.getclicky.com/js" type="text/javascript"></script>
<script type="text/javascript">try{ clicky.init(100713351); }catch(e){}</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100713351ns.gif" /></p></noscript>


</body>
</html>
